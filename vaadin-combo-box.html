<!--
@element vaadin-combo-box
-->

<link rel='import' href='../polymer/polymer.html'>
<link rel='import' href='../paper-input/paper-input-container.html'>
<link rel='import' href='../iron-input/iron-input.html'>
<link rel='import' href="../iron-icons/iron-icons.html">
<link rel='import' href='../iron-icon/iron-icon.html'>
<link rel='import' href='../iron-selector/iron-selector.html'>
<link rel='import' href='vaadin-adaptive-overlay.html'>

<dom-module id="vaadin-combo-box">
  <style>
    /* Temporary styles */
    #selector div {
      background: rgba(0, 0, 0, 0.2);
    }
    #selector div.iron-selected {
      background: rgba(0, 0, 0, 0.4);
    }
  </style>

  <template>
    <paper-input-container on-tap='open'>
      <input is="iron-input" bind-value={{value}}>
      <iron-icon icon="arrow-drop-down" suffix></iron-icon>
    </paper-input-container>

    <vaadin-adaptive-overlay id="overlay" opened={{opened}}>
      <iron-selector id='selector' selected={{value}} attr-for-selected='val'>
        <div val="foo">foo</div>
        <div val="bar">bar</div>
        <div val="baz">baz</div>
      </iron-selector>
    </vaadin-adaptive-overlay>
  </template>
</dom-module>

<script>
  Polymer({
    is: "vaadin-combo-box",

    properties: {
      /**
       * True if the dropdown is open, false otherwise.
       */
      opened: {
        type: Boolean,
        notify: true,
        value: false
      },

      /**
       * The value for this element.
       */
      value: {
        type: String,
        notify: true,
        observer: 'close'
      },

      /**
       * An array containing the items available for selection.
       */
      items: {
        type: Array,
        value: ["foo", "bar", "baz"],
        readOnly: true
      }
    },

    /**
     * Open the overlay.
     */
    open: function() {
      this.$.overlay.open();
    },

    /**
     * Close the overlay.
     */
    close: function() {
      this.$.overlay.close();
    },
  });
</script>
